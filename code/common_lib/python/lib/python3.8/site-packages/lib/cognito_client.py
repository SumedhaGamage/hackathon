import os

import boto3


class CognitoClient:

    def __init__(self):
        self.user_pool_id = os.environ.get('COGNITO_USER_POOL_ID')
        self.client = boto3.client('cognito-idp')

    def create(self, username):
        try:
            password = 'S3C~8:!"LV@FEYy{'
            response = self.client.admin_create_user(
                UserPoolId=self.user_pool_id,
                Username=username,
                TemporaryPassword=password,
            )
            print("admin_create_user", response)

            response = self.client.admin_set_user_password(
                UserPoolId=self.user_pool_id,
                Username=username,
                Password=password,
                Permanent=True
            )
            print("admin_set_user_password", response)
        except Exception as e:
            print("cognito user create failed", e.__str__())


    def confirm(self, username):
        try:
            self.client.admin_confirm_sign_up(
                UserPoolId=self.user_pool_id,
                Username=username,
            )
            print("admin_confirm_sign_up", username)
        except Exception as e:
            print("cognito admin_confirm_sign_up failed", e.__str__())